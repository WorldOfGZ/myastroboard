# ⚙️ Update

This guide covers all methods of updating MyAstroBoard.

## Updating

For users running the published image:
```bash
# Pull latest version
docker compose pull

# Restart with new version
docker compose up -d

# View current version
docker exec myastroboard cat /app/VERSION
```

For developers:
```bash
# Update repository
git pull

# Rebuild and restart
docker compose down
docker compose up -d --build
```

## Version History

See [Releases](https://github.com/WorldOfGZ/myastroboard/releases) for version history and changelogs.

## Backup Before Updating

Your data is persisted in volumes and will not be lost during updates. However, to be safe:

```bash
# Backup configuration
cp -r data data.backup

# Backup outputs (specific if you want kept these files, but they are regenerated)
cp -r uptonight_outputs uptonight_outputs.backup
```

## Rollback to Previous Version

If you need to rollback:

```bash
# For specific version
docker compose down
docker pull ghcr.io/worldofgz/myastroboard:v1.0.0
docker compose up -d
```

## Note for developers

### Uptonight Version

The uptonight Docker image version is managed in the `UPTONIGHT_VERSION` file in the repository root. This file contains only the version tag (e.g., `2.5`).

To update the uptonight version for a new release:
```bash
echo "2.6" > UPTONIGHT_VERSION
```

The system will use `mawinkler/uptonight:{version}` where version is read from this file.

> [!CAUTION]
> This repo is based on a certain version of UpTonight, increase version needs certainly modifications more than a version change.

### Adding New Target Catalogues

When UpTonight adds a new target catalogue (e.g., `newCatalogue.yaml`), simply add its name to `catalogues.conf`:

1. Edit `catalogues.conf` in the repository root
2. Add the catalogue name (without `.yaml` extension):
   ```
   Messier
   Herschel400
   OpenNGC
   newCatalogue    # ← Add new catalogue name here
   ```
3. Save and commit

> [!IMPORTANT]
> **That's it?** No code changes needed, but probably UpTonight version must be also changed!
> 